# ゲーム仕様書（LLM GM ソロTRPG / 1時間想定）

## 1. ゲーム概要
- **コンセプト**：LLMがGMとしてシナリオ生成と進行を担う、ソロTRPG Webアプリ
- **進行方式**：ゲームは **プレイヤーとLLM（GM）のチャット** によって進行する
- **想定プレイ時間**：約1時間（1セッションで完結）
- **想定プレイヤー**：1人
- **目標体験**
  - 進行が止まらず、短時間で起承転結まで到達できる
  - 会話・探索・交渉・対立を同一の枠組みで処理できる
  - 失敗しても「詰み」にくく、代償と引き換えに前進できる
- **前提**
  - ルール説明はゲーム開始時に簡易表示される想定
  - シナリオは毎回LLMが新規生成する（固定テンプレは持たない）

---

## 2. セッション構造
### 2.1 進行単位
- **シーン制**を基本とする  
  - 例：導入 → 調査/移動 → 対立/危機 → 解決/終幕

### 2.2 基本ループ
1. **状況提示**（現在の状況、目的、直近のリスク）
2. **プレイヤー行動**（チャットで自由入力 or 選択肢）
3. **判定**（必要な場合）
4. **結果提示**（成功/失敗/部分成功など）
5. **状態更新**（リソース、フラグ、所持品、NPC関係など）
6. 次シーンへ（または同シーン継続）

### 2.3 1時間に収める制約（方針）
- シーン数は **最大 6〜10** 程度を想定
- 重大分岐（結末に影響する分岐）は **最大 2〜3回** を想定
- 連続判定が続く場合は、GMが状況を整理して進行を収束させる（詰まらせない）

---

## 3. プレイヤーキャラクター（PC）
### 3.1 作成項目（概要）
- **基本プロフィール**：名前、年齢、性別、職業（または役割）
- **能力値**：複数（例：身体、敏捷、知性、精神 など）
- **技能**：複数（例：説得、隠密、観察、戦闘 など）
- **初期装備/所持品**：簡易に記述
- **特徴（任意）**：長所/短所、背景フレーバー（短文）

> ※能力値・技能の「数」「名称」「初期値」「決定方式」「判定への影響」などの詳細は  
> **別仕様書（mechanics-spec.md）**に記載する。

### 3.2 作成手順（方針）
- 入力中心（選択式＋自由記述）
- 能力値/技能の決定方式は **mechanics-spec.md** に従う

### 3.3 成長
- **成長はなし**（1セッション完結で、能力値・技能・恒久的パラメータは変化しない）

---

## 4. ルールの参照
本ゲームの詳細ルールは **mechanics-spec.md** にまとめる。ゲーム仕様書では以下を前提として参照する。
- **判定方式**（ダイス種別、成功判定、難易度/目標値、成功段階など）
- **リソース設計**（HP等の種類、増減ルール、上限/下限）
- **能力値・技能**（項目、初期値、成長なし前提での扱い）
- **対立の処理**（探索/交渉と同様に「判定→結果→状態更新」で収束させるルール）

---

## 5. 失敗と詰み防止
### 5.1 失敗時の扱い
- 失敗しても即終了にしない（基本方針）
- 失敗は以下のいずれかに変換して前進させる：
  - **代償**（リソース減少、時間消費、警戒度上昇、所持品消耗など）
  - **状況悪化**（敵が増える、制限が増す、手段が限定される）
  - **情報の取りこぼし**（ただし進行不能にはしない）

### 5.2 ループ回避
- 同一状況の繰り返しを禁止し、GMは必ず変化を付ける
- 一定回数失敗が続く場合、GMは打開策を提示する（ヒント・別ルート）

### 5.3 ヒント/救済（方針）
- プレイヤーが迷っている/停滞しているとGMが判断したら、
  - 次の目的を短く整理する
  - 取れる行動を少数（例：2〜4）に絞って提示する

---

## 6. 終了条件とリザルト
### 6.1 終了条件（方針）
- **成功**：主要目的を達成した
- **失敗**：目的達成が不可能になった（ただし可能なら“敗北エンド”として物語的に締める）
- **時間切れ**：一定の進行制限（シーン上限/時間リソース消費など）で終幕へ強制収束

### 6.2 エンディング
- 結末は複数あり得る（成功/敗北/妥協/撤退など）
- どの結末でも「物語としての締め」を提供する（ぶつ切りにしない）

### 6.3 リザルト内容（UIではなく内容定義）
- セッション結果（結末種別）
- 重要な出来事の要約（短文）
- 獲得物/失ったもの（アイテム、関係、代償）
- PC最終状態（主要リソース、主要フラグ）

---

## 7. ゲーム内データ定義（内容）
> 状態管理の詳細は別仕様（state-ops-spec.md）に書くが、ここでは意味と扱いを定義する。

### 7.1 状態として扱う項目（例）
- **現在地/状況**：今どこで何が起きているか
- **目的**：直近の目標（短文）
- **所持品**：プレイヤーが使えるリソース
- **主要リソース**：HP等（種類や増減は mechanics-spec.md を参照）
- **フラグ**：重要イベントの達成/未達、鍵情報の入手など
- **NPC関係**：友好/敵対、信頼度（簡易でも可）
- **時間/危険度（任意）**：時間切れ収束に使うための抽象指標

### 7.2 更新ルール（方針）
- 判定結果・選択結果に応じて、GMが状態を更新する
- 状態更新は「増減理由」とセットで説明する（納得感のため）

### 7.3 セーブ/再開
- **セーブ/再開機能はなし**（セッションは基本的に一度で完結させる）

---

## 8. スコープ（やらないこと）
- **マルチプレイ対応**：しない（単独プレイヤーのみ）
- **長期キャンペーン**：対象外
- **複雑なビルド/大量の数値管理**：初期版では避ける
- **固定シナリオテンプレ**：持たない（毎回LLMが新規生成）